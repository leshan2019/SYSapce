<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0,user-scalable=no">
    <link rel="Shortcut Icon" href="https://lebz.le.com/static/favicon.ico">
    <title>乐必中</title>
    <style>
        * {
            padding: 0;
            margin: 0;
        }

        .content {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            text-align: center
        }

        .content img {
            margin-top: 195px;
            width: 36px;
        }

        .content.accountNum img {
            width: 160px;
            margin-top: 115px;
            margin-bottom: 10px;
        }

        .content p {
            font-family: PingFangSC-Regular;
            font-size: 14px;
            color: #444444;
            margin-top: 18px;
            text-align: center
        }

        .content span {
            display: block;
            margin-top: 6px;
            font-family: PingFangSC-Regular;
            font-size: 12px;
            color: #666666;
            text-align: center;
        }
    </style>
    <script>
        !function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.LBZSdk=n():e.LBZSdk=n()}(this,function(){return function(e){function n(o){if(t[o])return t[o].exports;var i=t[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){var o;o=function(){"use strict";var n=[],o=t(7),i=navigator.userAgent.toLowerCase(),r=/iphone|ipad|ipod/.test(i),c={name:"lbz js bridge",version:"v1.0.0",terminal:r?1:2,isIos:r};window.LBZBridge=window.LBZBridge||{},window.LBZBridge.callback=o.callback,window.LBZBridge.fireEvent=o.fireEvent,window.LBZBridge.getTitle=function(){var e=document&&document.title||"";LBZSdk&&LBZSdk.win.set({title:e},function(){})};var u=function(e){return"function"!=typeof e?void console.log("注册的必须是一个函数"):void setTimeout(function(){e()},1)};c.ready=u;var a=function(){for(var e=n.pop();e;)e(),e=n.pop()},s=function(){c.alert=t(5),c.app=t(6),c.cache=t(8),c.calendar=t(9),c.data=t(10),c.device=t(11),c.gEvent=t(12),c.network=t(14),c.native=t(13),c.pay=t(15),c.pomelo=t(16),c.share=t(17),c.user=t(18),c.win=t(19)},f=function(){s(),a()};window&&f(),e.exports=c}.call(n,t,n,e),!(void 0!==o&&(e.exports=o))},function(e,n,t){var o;o=function(){"use strict";var n={core:{},fun:{}},o=t(3),i=t(4),r=navigator.userAgent.toLowerCase(),c=/iphone|ipad|ipod/.test(r),u=function(e,n){var t=i.RESPONSE_FIREEVENT,o=i.REGISTER_EVENT_PATH;s(t,o,n,e)},a=function(e){var t=e.split(".");2===t.length&&(n[t[0]][t[1]]=function(n,r){n=n||{},r=r||function(){};var u=c?t.join("."):t.join("_"),a=i.UNIQ_CALLBACK_PRE+(new Date).getTime()+""+Math.floor(1e4*Math.random()),f=i.RESPONSE_CALLBACK_FUN,l=i.REGISTER_FUNC_PATH;o[a]=r,"fun.userLogin"===e&&(window.doingLogin=a),s(f,l,n,u,a)})},s=function(e,n,t,o,r){r=r||o;var c=document.createElement("iframe");c.id=r,c.style.display="none",document.documentElement.appendChild(c),c.src=i.CUSTOM_PROTOCOL_SCHEME+n+"?action="+o+"&callback="+e+"&callback_id="+r+"&sendData="+JSON.stringify(t)};e.exports={bridge:n,registerFunc:a,registerEvent:u}}.call(n,t,n,e),!(void 0!==o&&(e.exports=o))},function(e,n,t){var o;o=function(){"use strict";var n=t(3),o=function(e,t){"function"==typeof t&&(n[e]=t)};e.exports={on:o}}.call(n,t,n,e),!(void 0!==o&&(e.exports=o))},function(e,n,t){var o;o=function(){"use strict";var n={};e.exports={listeners:n}}.call(n,t,n,e),!(void 0!==o&&(e.exports=o))},function(e,n,t){var o;o=function(){"use strict";var n={CUSTOM_PROTOCOL_SCHEME:"lebz://lebz.le.com/",RESPONSE_CALLBACK_FUN:"LBZBridge.callback",RESPONSE_FIREEVENT:"LBZBridge.fireEvent",REGISTER_EVENT_PATH:"registerEvent",REGISTER_FUNC_PATH:"registerFunc",UNIQ_CALLBACK_PRE:"lbz_bridge_"},t={};n.names=t,e.exports=n}.call(n,t,n,e),!(void 0!==o&&(e.exports=o))},function(e,n,t){var o;o=function(){"use strict";var n=t(1),o={};n.registerFunc("fun.Alert"),n.registerFunc("fun.Toast"),o.toast=function(e){n.bridge.fun.Toast(e,function(){})},o.open=function(e,t){n.bridge.fun.Alert(e,t)},e.exports=o}.call(n,t,n,e),!(void 0!==o&&(e.exports=o))},function(e,n,t){var o;o=function(){"use strict";var n=navigator.userAgent;n=n.toLowerCase();var o=/iphone|ipad|ipod/.test(n),i=n.indexOf("lbzclient")>-1,r=t(1),c=t(4),u=t(2),a=Object.create(u);r.registerFunc("core.getAppInfo"),r.registerFunc("core.hasInstalled"),a.getInfo=function(e){r.bridge.core.getAppInfo(null,e)},a.hasInstalled=function(e,n){o||(e.name=c.names[e.name]||e.name||""),r.bridge.core.hasInstalled(e,n)},a.isAppEnv=i,e.exports=a}.call(n,t,n,e),!(void 0!==o&&(e.exports=o))},function(e,n,t){var o;o=function(){"use strict";var n=t(3),o=function(e,t){var o=n[e];t=t||"{}";try{t=JSON.parse(t)}catch(e){}o&&o(t)},i=function(e,t){var o=n[e];t=t||"{}";try{t=JSON.parse(t)}catch(e){}o&&o(t),delete n[e],e===window.doingLogin&&(window.doingLogin=null);var i=document.getElementById(e);i&&i.parentNode.removeChild(i)};e.exports={fireEvent:o,callback:i}}.call(n,t,n,e),!(void 0!==o&&(e.exports=o))},function(e,n,t){var o;o=function(){"use strict";var n=t(1),o={};n.registerFunc("fun.updateCache"),o.updateCache=function(e){n.bridge.fun.updateCache(null,e)},e.exports=o}.call(n,t,n,e),!(void 0!==o&&(e.exports=o))},function(e,n,t){var o;o=function(){"use strict";var n=t(1),o={};n.registerFunc("fun.selectDate"),o.select=function(e,t){n.bridge.fun.selectDate(e,t)},e.exports=o}.call(n,t,n,e),!(void 0!==o&&(e.exports=o))},function(e,n,t){var o;o=function(){"use strict";var n=t(1),o={};n.registerFunc("fun.setData"),n.registerFunc("fun.getData"),n.registerFunc("fun.copyToClipboard"),n.registerFunc("fun.getClipboard"),o.setData=function(e,t){n.bridge.fun.setData(e,t||function(){})},o.getData=function(e,t){n.bridge.fun.getData(e,t||function(){})},o.copyToClipboard=function(e,t){n.bridge.fun.copyToClipboard(e,t||function(){})},o.getClipboard=function(e){n.bridge.fun.getClipboard(null,e||function(){})},e.exports=o}.call(n,t,n,e),!(void 0!==o&&(e.exports=o))},function(e,n,t){var o;o=function(){"use strict";var n=t(1),o=t(2),i=Object.create(o);n.registerFunc("core.getDeviceInfo"),n.registerFunc("core.getPowerLevel"),n.registerFunc("core.getSpaceSize"),n.registerFunc("core.setOrientation"),i.getInfo=function(e){n.bridge.core.getDeviceInfo(null,e)},i.getPower=function(e){n.bridge.core.getPowerLevel(null,e)},i.getSpaceSize=function(e){n.bridge.core.getSpaceSize(null,e)},i.setOrientation=function(e,t){var o=e.orientation||"portrait";e.orientation={landscape:3,portrait:1}[o],n.bridge.core.setOrientation(e,t)},e.exports=i}.call(n,t,n,e),!(void 0!==o&&(e.exports=o))},function(e,n,t){var o;o=function(){"use strict";var n=t(1),o={};o.enable=function(e){var t={switch:1};n.registerEvent(e,t)},o.disable=function(e){var t={switch:0};n.registerEvent(e,t)},e.exports=o}.call(n,t,n,e),!(void 0!==o&&(e.exports=o))},function(e,n,t){var o;o=function(){"use strict";var n=t(1),o={},i=navigator.userAgent.toLowerCase(),r=/iphone|ipad|ipod/.test(i);n.registerFunc("fun.openDetail"),o.openDetail=function(e,t){r||"jd"!==e.channel||(e.channel="jdmobile"),n.bridge.fun.openDetail(e,t||function(){})},e.exports=o}.call(n,t,n,e),!(void 0!==o&&(e.exports=o))},function(e,n,t){var o;o=function(){"use strict";var n=t(1),o=t(2),i=Object.create(o);n.registerFunc("core.getNetwork"),i.getInfo=function(e){n.bridge.core.getNetwork(null,e)},e.exports=i}.call(n,t,n,e),!(void 0!==o&&(e.exports=o))},function(e,n,t){var o;o=function(){"use strict";var n=t(1),o={};n.registerFunc("fun.pay"),o.payOrder=function(e,t){n.bridge.fun.pay(e,t)},e.exports=o}.call(n,t,n,e),!(void 0!==o&&(e.exports=o))},function(e,n,t){var o;o=function(){"use strict";var n=t(1),o=t(2),i=Object.create(o);n.registerFunc("fun.initPomelo"),n.registerFunc("fun.requestPomelo"),n.registerFunc("fun.disconnectPomelo"),i.init=function(e,t){n.bridge.fun.initPomelo(e,t)},i.request=function(e,t,o){n.bridge.fun.requestPomelo({route:e,msg:t||""},o)},i.disconnect=function(){n.bridge.fun.disconnectPomelo(null,function(){})},e.exports=i}.call(n,t,n,e),!(void 0!==o&&(e.exports=o))},function(e,n,t){var o;o=function(){"use strict";var n=t(1),o={};n.registerFunc("fun.openShare"),o.open=function(e,t){n.bridge.fun.openShare(e,t||function(){})},e.exports=o}.call(n,t,n,e),!(void 0!==o&&(e.exports=o))},function(e,n,t){var o;o=function(){"use strict";var n=t(1),o=t(2),i=Object.create(o);n.registerFunc("fun.isLogin"),n.registerFunc("fun.getUserInfo"),n.registerFunc("fun.userLogin"),n.registerFunc("fun.reGrant"),i.isLogin=function(e){n.bridge.fun.isLogin(null,e)},i.getInfo=function(e){n.bridge.fun.getUserInfo(null,e)},i.login=function(e){return window.doingLogin?void setTimeout(function(){window.doingLogin=null},5e3):void n.bridge.fun.userLogin(null,e)},i.reGrant=function(e,t){n.bridge.fun.reGrant(e,t)},e.exports=i}.call(n,t,n,e),!(void 0!==o&&(e.exports=o))},function(e,n,t){var o;o=function(){"use strict";var n=t(1),o={};n.registerFunc("fun.openWebview"),n.registerFunc("fun.WebviewForward"),n.registerFunc("fun.WebviewBack"),n.registerFunc("fun.setWebview"),n.registerFunc("fun.backToUrl"),o.open=function(e){n.bridge.fun.openWebview(e,function(){})},o.forward=function(e){n.bridge.fun.WebviewForward(null,e)},o.back=function(e){n.bridge.fun.WebviewBack(null,e)},o.backToUrl=function(e,t){n.bridge.fun.backToUrl(e,t)},o.set=function(e,t){n.bridge.fun.setWebview(e,t)},e.exports=o}.call(n,t,n,e),!(void 0!==o&&(e.exports=o))}])});
    </script>
</head>
<body>
<div class="content" onclick="retry()">
    <img src="./images/Group4@2x.png">
    <p id="content">授权失败</p>
    <span>点击页面刷新</span>
</div>
<script>
    var doing = false;
    var content = document.getElementById('content');
    
    if (location.search) {
        var query = location.search.substr(1);
        var querys = query && query.split('&');
        
        if (querys && querys[0]) {
            for (var i = 0; i < querys.length; i++) {
                if (querys[i] && querys[i].split('=') && 'content' === querys[i].split('=')[0]) {
                    content.innerHTML = decodeURIComponent(querys[i].split('=')[1]);
                }
            }
        }
    }
    
    function retry() {
        if(doing){ return; }

        doing = true;
        LBZSdk && LBZSdk.user.reGrant({"source": "app"},function(info){
            doing = false;
            console.log(info.res);
        })
    }
</script>
</body>
</html>
